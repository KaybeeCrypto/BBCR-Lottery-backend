<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>COMMIT â€” Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #0b0f14;
      color: #e6e6e6;
      margin: 0;
      padding: 32px;
    }

    h1 {
      font-weight: 600;
      margin-bottom: 12px;
    }

    h2 {
      font-weight: 600;
      margin-top: 0;
    }

    .section-title {
      max-width: 760px;
      margin: 48px auto 12px;
      font-size: 0.85rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      opacity: 0.6;
    }

    .box {
      max-width: 760px;
      margin: 0 auto 24px;
      padding: 24px;
      border: 1px solid #2a2f36;
      border-radius: 10px;
      background: #11161d;
      box-shadow: 0 0 0 1px rgba(255,255,255,0.02);
    }

    .box.warning {
      border-color: #553333;
      background: #151015;
    }

    .box.final {
      border-color: #5b4a1a;
      background: #14130b;
    }

    label {
      display: block;
      margin-top: 16px;
      font-size: 0.85rem;
      opacity: 0.85;
    }

    input {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      background: #0b0f14;
      border: 1px solid #333;
      color: #e6e6e6;
      border-radius: 4px;
    }

    button {
      margin-top: 16px;
      padding: 10px 16px;
      background: #2b6cb0;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      transition: opacity 0.15s ease, transform 0.05s ease;
    }

    button:hover:not(:disabled) {
      opacity: 0.9;
    }

    button:active:not(:disabled) {
      transform: translateY(1px);
    }

    button:disabled {
      opacity: 0.45;
      cursor: not-allowed;
    }

    button.danger {
      background: #7a2e2e;
    }

    button.finalize {
      background: #a87c1a;
      color: #111;
    }

    pre {
      background: #0b0f14;
      padding: 12px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 0.8rem;
      border-left: 3px solid #2b6cb0;
      margin-top: 16px;
    }

    .status {
      margin-top: 10px;
      font-size: 0.85rem;
      opacity: 0.8;
    }

    .status.success {
      color: #4ade80;
      font-weight: 500;
    }

    .muted {
      opacity: 0.55;
      font-size: 0.8rem;
      margin-top: 6px;
    }

    .spinner {
      display: inline-block;
      width: 14px;
      height: 14px;
      margin-left: 8px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      vertical-align: middle;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .state-bar {
      max-width: 760px;
      margin: 0 auto 24px;
      padding: 14px 18px;
      border-radius: 8px;
      background: #0f141b;
      border: 1px solid #2a2f36;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.85rem;
    }

    .state-badge {
      padding: 4px 10px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 0.75rem;
      background: #333;
    }
  </style>
</head>

<body>

<h1>COMMIT â€” Admin Panel</h1>

<div class="box">
  <h2>Admin Access</h2>
  <label>Admin Secret</label>
  <input id="secretInput" type="password" placeholder="Paste ADMIN_SECRET here" />
  <button onclick="saveSecret()">Authenticate</button>
  <div class="status" id="loginStatus">Not authenticated</div>
</div>

<div id="adminContent" style="display:none;">

  <div class="state-bar">
    <div>Current Round State</div>
    <div class="state-badge" id="roundStateBadge">â€”</div>
  </div>

  <div class="box">
    <button onclick="loadState()">Reload State</button>
    <pre id="stateOutput">â€”</pre>
  </div>

  <div class="section-title">Configuration</div>

  <div class="box">
    <h2>Token Config</h2>
    <label>Mint Address</label>
    <input id="mintInput" placeholder="So11111111111111111111111111111111111111112" />
    <label>Minimum Hold Amount</label>
    <input id="minHoldInput" type="number" placeholder="0" />
    <button id="btnSaveToken" onclick="saveToken()">Save Token Config</button>
    <div class="status" id="tokenStatus">â€”</div>
  </div>

  <div class="section-title">Round Lifecycle</div>

  <div class="box warning">
    <h2>Reset Round</h2>
    <button id="btnResetRound" class="danger" onclick="resetRound()">Reset Round</button>
    <div class="muted">This action clears the current round state.</div>
    <pre id="resetOutput">â€”</pre>
  </div>

  <div class="box">
    <h2>Snapshot Preview</h2>
    <button id="btnPreview" onclick="previewHolders()">Preview Holders</button>
    <pre id="previewOutput">â€”</pre>
  </div>

  <div class="box">
    <h2>Take Snapshot</h2>
    <button id="btnSnapshot" onclick="takeSnapshot()">Take Snapshot</button>
    <pre id="snapshotOutput">â€”</pre>
  </div>

  <div class="section-title">Live Phases</div>

  <div class="box">
    <h2>Commit Phase</h2>
    <input id="commitMinutesInput" type="number" value="5" min="1" placeholder="Minutes" />
    <button id="btnCommit" onclick="startCommit()">Start Commit</button>
    <pre id="commitOutput">â€”</pre>
    <div class="status" id="commitCountdown">â€”</div>
  </div>

  <div class="box">
    <h2>Reveal Phase</h2>
    <input id="revealMinutesInput" type="number" value="5" min="1" placeholder="Minutes" />
    <button id="btnReveal" onclick="startReveal()">Start Reveal</button>
    <pre id="revealOutput">â€”</pre>
    <div class="status" id="revealCountdown">â€”</div>
  </div>

  <div class="box final">
    <h2>Finalize Winner</h2>
    <button id="btnFinalize" class="finalize" onclick="finalizeWinner()">Finalize</button>
    <div class="muted">This permanently finalizes the round.</div>
    <pre id="finalizeOutput">â€”</pre>
  </div>

</div>

<script>
/* ðŸ”’ JS LOGIC â€” UNCHANGED */
const API_BASE = "https://bbcr-lottery.onrender.com";
let lastKnownState = null;
let countdownInterval = null;

/* existing JS exactly as you provided */
</script>

</body>
</html>
